import{an as S,bf as T,b1 as B,a_ as E,ag as p,b0 as A,ad as R,b3 as c,au as k,av as O,aH as e,b5 as s,ah as t,a4 as h,aF as N,aY as U,b7 as K,aE as P,bc as M,be as j,bk as L,bb as V,a$ as Y,$ as z,bB as H,b9 as W,ba as G,at as q}from"./index-1e3b5e9c.js";import{C as J}from"./challenge-api-service-8347c7e6.js";import{M as Q}from"./match-service-ebe62e39.js";import{f as I}from"./formattDecimal-b5d82fb2.js";import{T as $}from"./publicUnit-82a6e2b0.js";import{C as X,R as Z}from"./index-1f6fe659.js";import{M as ee}from"./match-api-service-85ee51bf.js";import{M as te}from"./enums-1cf4aa58.js";import"./match-data-ext-5e1df082.js";import"./nft-data-00f9cd4d.js";import"./match-utils-793d0e6d.js";import"./erc721-service-bd0ec81e.js";import"./transaction-api-service-8b388dbb.js";import"./utils-518c8eb5.js";import"./contract-data-service-bee1e717.js";import"./battle-contract-service-bdced59b.js";import"./constants-2bfeaeae.js";import"./Col-006999ba.js";import"./responsiveObserve-f3a612e5.js";import"./useFlexGapSupport-f4e16cef.js";const se=d=>(W("data-v-1ebf416e"),d=d(),G(),d),ae={class:"py-3 space-y-3 teamFight"},oe={class:"px-3 text-base text-white"},ce={class:"px-3 overflow-x-hidden overflow-y-auto box pb-[150px] space-y-5"},ne=["onClick"],le={class:"flex items-center w-full space-x-3"},re={class:"flex-grow"},ie={class:"text-sm text-white font-autom"},_e={class:"text-sm font-primary font-autom"},ue=se(()=>e("p",{style:{height:"1px",background:"#2e2e2e"},class:"my-2"},null,-1)),pe={class:"pb-2 text-xs f-1 font-pf"},he={class:"px-2 py-1 text-xs f-1 font-autom",style:{background:"#151515"}},de={class:"absolute bottom-0 left-0 flex flex-col items-center justify-center w-full px-3 submit"},fe=S({__name:"Fight",setup(d){const n=T(),D=B(),{t:o}=E(),a=p([]),x=p(o("views.account.selectOpponent.t8")),u=p(-1),l=p(!1),r=p(""),F=n.query.match_id??"",g=new J,{open:b}=A();R(async()=>{y()});const y=async()=>{if(F==""){c("Match ID is empty in Fight.vue","error",!1);return}a.value=await g.getChallengeDataExtListByMatchId(F),console.log("challenge_data_ext_list",a.value)},w=(f,m)=>{r.value=f,u.value=m},C=async()=>{const f=Y();if(!f.address){b();return}if(u.value==-1)return;l.value=!0;const m=z(),i=.003;if(!await H(f.address,m,i)){c(o("views.account.selectOpponent.t15",{unit:$}),"error",!1);return}const _=n.query.match_id??"";if(_==""){c("Match ID is empty in Fight.vue","error",!1),l.value=!1;return}if(r.value==""){c(o("views.account.selectOpponent.t13"),"error",!1),l.value=!1;return}console.log("challenge_id",r.value);try{const v=await Q.startMatch(m,r.value,_);console.log("tx_hash",v),c(o("views.account.selectOpponent.t14"),"success",!1,2,()=>{D.push({path:"/fightInfo/index",query:{match_id:_}})}),l.value=!1}catch(v){console.log("e",v),c(v.message,"error",!1),l.value=!1}};return(f,m)=>(k(),O("div",ae,[e("p",oe,s(t(o)("views.account.selectOpponent.t3")),1),e("section",ce,[h(t(Z),{gutter:[10,10]},{default:N(()=>[(k(!0),O(U,null,K(a.value,(i,_)=>(k(),P(t(X),{md:12,xs:24,key:_},{default:N(()=>[e("div",{class:M(["relative w-full p-3 space-y-3 cursor-pointer col",u.value==_?"choose":""]),onClick:v=>w(i.challengeId,_)},[e("div",le,[h(t(j),{width:120,height:120,src:i.challengerNFTData.cacheImageUrl,class:"flex-shrink-0"},null,8,["src"]),e("div",re,[e("p",ie,s(i.challengerNFTData.symbol)+" #"+s(i.challengerNFTData.nftTokenId),1),e("p",_e,"K.O."+s(i.challengerNFTData.koScore),1),ue,e("p",pe,s(t(o)("views.account.selectOpponent.t4"))+" ï¼š"+s(t(I)(Number(i.sellPrice)))+" "+s(t($)),1),e("p",he,s(t(o)("views.account.selectOpponent.t5"))+" "+s(t(I)(0)),1)])])],10,ne)]),_:2},1024))),128))]),_:1}),e("div",de,[h(t(V),{spinning:l.value},{default:N(()=>[h(t(L),{class:M(["flex items-center justify-center w-full font-semibold border-0 rounded-none bg-primary",{unBtn:u.value==-1}]),onClick:C,textContent:x.value},null,8,["class","textContent"])]),_:1},8,["spinning"])])])]))}});const me=q(fe,[["__scopeId","data-v-1ebf416e"]]),ve={class:"flex space-x-10 selectOpponent"},xe={class:"w-1/3 p-4 space-y-3 section self-baseline"},ge={class:"text-base text-white"},be={class:"p-3 space-y-3 s_line"},ye={class:"w-full"},we={class:"space-y-1"},Ce={class:"flex items-center justify-between text-xs"},ke={class:"text-white"},Ie={class:"font-primary"},De={class:"flex items-center justify-between"},Fe={class:"text-lg text-white"},Ne={class:"px-3 py-1 text-xs f-1",style:{background:"#151515"}},Oe={class:"relative w-2/3 section fight-baseline"},$e=S({__name:"index",setup(d){const{t:n}=E(),D=T(),o=B(),a=p(),x=D.query.match_id??"",u=new ee;R(()=>{l()});const l=async()=>{var r;if(x==""){c(n("views.account.selectOpponent.t9"),"error",!1),o.back();return}if(a.value=await u.getMatchDataExtByMatchId(x),console.log("match_data_ext",a.value),!a.value){c(n("views.account.selectOpponent.t10"),"error",!1),o.back();return}if(((r=a.value)==null?void 0:r.matchStatus)!=te.READY){c(n("views.account.selectOpponent.t11"),"error",!1),o.back();return}};return(r,F)=>{var g,b,y,w,C;return k(),O("div",ve,[e("section",xe,[e("p",ge,s(t(n)("views.account.selectOpponent.t1")),1),e("div",be,[e("div",ye,[h(t(j),{src:(g=a.value)==null?void 0:g.arenaCreatorNFTData.cacheImageUrl},null,8,["src"])]),e("div",we,[e("p",Ce,[e("span",ke,s((b=a.value)==null?void 0:b.arenaCreatorNFTData.symbol)+" #"+s((y=a.value)==null?void 0:y.arenaCreatorNFTData.nftTokenId),1),e("span",Ie,"K.O."+s((w=a.value)==null?void 0:w.arenaCreatorNFTData.koScore),1)]),e("p",De,[e("span",Fe,s(t(I)((C=a.value)==null?void 0:C.arenaCreatorNftSellPrice))+" "+s(t($)),1),e("span",Ne,s(t(n)("views.account.selectOpponent.t2"))+" "+s(t(I)(0)),1)])])])]),e("section",Oe,[h(me)])])}}});const Qe=q($e,[["__scopeId","data-v-3633fa85"]]);export{Qe as default};
