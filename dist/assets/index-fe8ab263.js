import{an as Y,a_ as j,a$ as q,b0 as z,b1 as U,ag as d,b2 as G,ad as J,b3 as Q,b4 as X,au as o,av as l,aH as t,b5 as s,ah as a,b6 as c,a4 as _,aY as S,b7 as C,aE as Z,b8 as tt,b9 as et,ba as st,bb as at,bc as h,aF as W,bd as D,be as nt,at as ot}from"./index-1e3b5e9c.js";import{T as V}from"./TimeFormatting-2526bf3a.js";import{N as A}from"./next-2b6d53fd.js";import{_ as lt}from"./index.vue_vue_type_script_setup_true_lang-d51c3f46.js";import{T as k}from"./index-f42bfe17.js";import"./firstNotUndefined-748ee901.js";const L=m=>(et("data-v-6e6d7963"),m=m(),st(),m),ct={class:"battle"},_t={class:"battle_title"},it={key:0,class:"battle_info"},dt={class:"w-1/4"},rt=L(()=>t("div",{class:"w-3/4"},"Battle",-1)),ut=L(()=>t("div",{class:"line"},null,-1)),vt={class:"content"},ht={class:"w-1/4 battle_content_msg"},ft={class:"battle_content_msg_title"},bt={class:"battle_content_msg_status"},gt={class:"w-1/2 battle_content_info"},mt={class:"w-2/5 battle_content_info_nft"},pt={class:"relative nft_img"},wt={key:0,class:"absolute burn"},yt={class:"battle_content_info_nft_detail arean"},Nt={class:"battle_content_info_nft_detail_metaName"},Wt={class:"battle_content_info_nft_detail_name"},kt={class:"justify-end w-2/5 battle_content_info_nft"},It={class:"battle_content_info_nft_detail challeng"},Mt={class:"battle_content_info_nft_detail_metaName"},Bt={class:"battle_content_info_nft_detail_name"},Tt={class:"relative nft_img"},xt={key:0,class:"absolute burn"},Rt=["onClick"],Et=["src"],St={class:"m_battle_msg"},Ct={class:"m_battle_left"},Dt={class:"m_title"},Vt={class:"m_status"},At=["onClick"],Lt=["src"],$t={class:"m_battle_data"},Ht={class:"m_nft_info"},Pt={class:"m_nft"},Ft={key:0,class:"absolute burn"},Kt={class:"m_nft_det"},Ot={class:"m_meta_name"},Yt={class:"m_name"},jt={class:"m_nft_info"},qt={class:"m_nft"},zt={key:0,class:"absolute burn"},Ut={class:"m_nft_det"},Gt={class:"m_meta_name"},Jt={class:"m_name"},Qt={key:3},Xt=Y({__name:"index",setup(m){const{t:i}=j(),p=q(),{open:$}=z(),[H]=[U()],B=new tt,r=d([]),f=d(!0),w=d(!1),I=d(!0),T=d(!0),x=d(0),P=d(0),y=d(20),{chain:u}=G();J(async()=>{if(!p.address){$();return}f.value=!0;try{await F(p.address),window.addEventListener("scroll",E)}catch(n){Q(n.message,"error",!1)}finally{f.value=!1}});const F=async n=>{r.value=await B.getBattleDataAll(n,{start:P.value,length:y.value,chainId:u==null?void 0:u.id})},R=n=>{H.push({path:"/fightInfo/index",query:{match_id:n}})},E=async()=>{var b;const n=window.scrollY||document.documentElement.scrollTop,v=window.innerHeight+n>=document.documentElement.scrollHeight;if(p.address&&v&&T.value&&I.value){w.value=!0,I.value=!1;const g=await B.getBattleDataAll(p.address,{start:y.value+x.value*y.value,length:y.value,chainId:u==null?void 0:u.id});if(x.value+=1,g.length==0){T.value=!1,w.value=!1;return}r.value=(b=r.value)==null?void 0:b.concat(g),w.value=!1,I.value=!0}};X(()=>{window.removeEventListener("scroll",E)});const N=n=>{n.target.clientWidth>=n.target.scrollWidth&&(n.target.style.pointerEvents="none")};return(n,K)=>{var b,g;const v=nt;return o(),l("div",ct,[t("div",_t,s(a(i)("views.account.battleRecord.t1")),1),(b=r.value)!=null&&b.length?(o(),l("div",it,[t("div",dt,s(a(i)("views.account.battleRecord.t2")),1),rt])):c("",!0),ut,t("div",vt,[_(a(at),{spinning:f.value},null,8,["spinning"]),f.value?c("",!0):(o(!0),l(S,{key:0},C(r.value,(e,M)=>(o(),l("div",{class:"battle_content",key:M},[t("div",ht,[t("div",ft,s(a(V)(e.matchEndTime)),1),t("div",bt,s(e.leftWin=="0"?a(i)("views.account.battleRecord.t3"):a(i)("views.account.battleRecord.t4")),1)]),t("div",gt,[t("div",mt,[t("div",pt,[_(v,{src:e.leftNftImage,width:50,height:50,class:h({grayscale:e.leftWin=="-1"})},null,8,["src","class"]),e.leftWin=="-1"?(o(),l("div",wt,"burn")):c("",!0)]),t("div",yt,[_(a(k),{title:e.leftMetaName,onMouseenter:N},{default:W(()=>[t("div",Nt,s(e.leftMetaName),1)]),_:2},1032,["title"]),t("div",Wt,s(e.leftName),1)])]),t("div",{class:h(["w-1/5 battle_content_info_status",{vs:e.leftWin=="0",burn_by:e.leftWin=="-1"}])},s(e.leftWin=="0"?"VS":e.leftWin=="1"?"K.O.":"Burn By"),3),t("div",kt,[t("div",It,[_(a(k),{title:e.rightMetaName,onMouseenter:N},{default:W(()=>[t("div",Mt,s(e.rightMetaName),1)]),_:2},1032,["title"]),t("div",Bt,s(e.rightName),1)]),t("div",Tt,[_(v,{src:e.rightNftImage,width:50,height:50,class:h({grayscale:e.rightWin=="-1"})},null,8,["src","class"]),e.rightWin=="-1"?(o(),l("div",xt,"burn")):c("",!0)])])]),t("div",{class:"w-1/4 battle_content_view",onClick:O=>R(e.matchId)},[D(s(a(i)("views.account.battleRecord.t5"))+" ",1),t("img",{src:a(A),alt:""},null,8,Et)],8,Rt)]))),128)),f.value?c("",!0):(o(!0),l(S,{key:1},C(r.value,(e,M)=>(o(),l("div",{class:"m_battle_content",key:M},[t("div",St,[t("div",Ct,[t("div",Dt,s(a(V)(e.matchEndTime)),1),t("div",Vt,s(e.leftWin=="0"?a(i)("views.account.battleRecord.t3"):a(i)("views.account.battleRecord.t4")),1)]),t("div",{class:"m_view",onClick:O=>R(e.matchId)},[D(s(a(i)("views.account.battleRecord.t5"))+" ",1),t("img",{src:a(A),alt:""},null,8,Lt)],8,At)]),t("div",$t,[t("div",Ht,[t("div",Pt,[_(v,{src:e.leftNftImage,width:80,height:80,class:h({grayscale:e.leftWin=="-1"})},null,8,["src","class"]),e.leftWin=="-1"?(o(),l("div",Ft,"burn")):c("",!0)]),t("div",Kt,[_(a(k),{title:e.leftMetaName,onMouseenter:N},{default:W(()=>[t("div",Ot,s(e.leftMetaName),1)]),_:2},1032,["title"]),t("div",Yt,s(e.leftName),1)])]),t("div",{class:h(["m_battle_status",{vs:e.leftWin=="0",burn_by:e.leftWin=="-1"}])},s(e.leftWin=="0"?"VS":e.leftWin=="1"?"K.O.":"Burn By"),3),t("div",jt,[t("div",qt,[_(v,{src:e.rightNftImage,width:80,height:80,class:h({grayscale:e.rightWin=="-1"})},null,8,["src","class"]),e.rightWin=="-1"?(o(),l("div",zt,"burn")):c("",!0)]),t("div",Ut,[_(a(k),{title:e.rightMetaName,onMouseenter:N},{default:W(()=>[t("div",Gt,s(e.rightMetaName),1)]),_:2},1032,["title"]),t("div",Jt,s(e.rightName),1)])])])]))),128)),(g=r.value)!=null&&g.length?c("",!0):(o(),Z(lt,{key:2,class:"empty"})),w.value?(o(),l("div",Qt,"loading...")):c("",!0)])])}}});const oe=ot(Xt,[["__scopeId","data-v-6e6d7963"]]);export{oe as default};
