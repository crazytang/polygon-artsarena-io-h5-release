import{d as U,m as C,r as k,bw as M,b as o,q as D,w,f as c,z as P,c as l,e as t,F as y,k as b,h as i,B as j,bD as E,ag as L,P as V,p as W,j as q,l as z}from"./index-358dafb1.js";import{U as A}from"./user-service-8733782b.js";import{g as Y,b as G}from"./axios-a9967ddc.js";import{C as H}from"./contract-data-service-c67a4983.js";import{C as F}from"./index-b00129ad.js";const f=_=>(W("data-v-2d19dd33"),_=_(),q(),_),J={class:"selectNFTModal"},K={class:"flex selectNFTBox"},O={class:"flex flex-col w-1/2 p-4 space-y-2"},Q=f(()=>t("p",{class:"flex-shrink-0 text-lg text-white"},"從BurnYou賬戶選擇",-1)),R={class:"flex-grow overflow-hidden"},X={class:"grid max-h-full grid-cols-4 gap-2 overflow-y-auto scrollBar-y"},Z=f(()=>t("div",{style:{background:"#333",width:"1px",height:"100%"}},null,-1)),$={class:"flex flex-col w-1/2 p-4 space-y-2"},ee=f(()=>t("p",{class:"flex-shrink-0 text-lg text-white"},"從錢包選擇",-1)),se={class:"relative flex-grow"},te={key:0,class:"grid max-h-full grid-cols-4 gap-2 overflow-y-auto scrollBar-y"},ae={key:1,class:"text-white w-full h-full flex justify-center items-center"},oe={class:"flex justify-center w-full pt-4"},ce=f(()=>t("span",{class:"text-sm font-bold text-black"},"确定",-1)),le=U({__name:"SelectNFTModal",emits:["success"],setup(_,{expose:N,emit:T}){const u=C({open:!1});let n=k(),p=k();const h=Y(),x=G();let B;const v=k(!1);let m=!1;async function I(){if(!(!h||!h.address)){if(x===null)throw new Error("chain_id is null");if(!m){v.value=!0;try{console.log("user_account.address",h.address);const a=new A(h.address);n.value=await a.getUserNFTInWallet(x),console.log(n.value);debugger;n.value.map(e=>(e.checked=!1,e)),B=(await H.getL1NFTBattlePoolData()).contract_address,p.value=await a.getUserNFTInPool(),p.value.map(e=>(e.checked=!1,e)),m=!0}catch(a){console.error(a)}v.value=!1}}}const S=async()=>{var r,e;let a=(r=p.value)==null?void 0:r.find(d=>d.checked);a||(a=(e=n.value)==null?void 0:e.find(d=>d.checked)),a?(u.open=!1,T("success",a)):L.error("请选择需要质押的NFT")};return N({openModal:()=>{u.open=!0,I()}}),(a,r)=>{const e=V,d=M("loading");return o(),D(c(E),{open:u.open,"onUpdate:open":r[0]||(r[0]=s=>u.open=s),closable:!1,footer:null,wrapClassName:"custom-modal",style:{width:"800px",height:"500px"},maskStyle:{animation:"none"}},{default:w(()=>[P((o(),l("div",J,[t("div",K,[t("section",O,[Q,t("div",R,[t("div",X,[(o(!0),l(y,null,b(c(p),s=>(o(),l("div",{key:s,class:"relative"},[i(e,{src:s.cacheImageUrl},null,8,["src"]),i(c(F),{checked:s.checked,"onUpdate:checked":g=>s.checked=g,class:"absolute top-0 right-1"},null,8,["checked","onUpdate:checked"])]))),128))])])]),Z,t("section",$,[ee,t("div",se,[c(n)?(o(),l("div",te,[(o(!0),l(y,null,b(c(n),s=>(o(),l("div",{key:s,class:"relative"},[i(e,{src:s.cacheImageUrl},null,8,["src"]),i(c(F),{checked:s.checked,"onUpdate:checked":g=>s.checked=g,class:"absolute top-0 right-1"},null,8,["checked","onUpdate:checked"])]))),128))])):(o(),l("div",ae," 你的錢包目前沒有NFT "))])])]),t("div",oe,[i(c(j),{class:"submit-btn",onClick:S},{default:w(()=>[ce]),_:1})])])),[[d,v.value]])]),_:1},8,["open"])}}});const ue=z(le,[["__scopeId","data-v-2d19dd33"]]);export{ue as S};
