import{an as N,ag as c,ad as B,aa as I,ai as $,au as n,av as u,aH as o,bS as S,br as x,aY as R,b6 as d,b5 as l,b9 as V,ba as z,bd as D,at as E}from"./index-1e3b5e9c.js";const q=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,y=f=>(V("data-v-0ba2d85e"),f=f(),z(),f),W={class:"m-countdown"},P={class:"m-time"},j={class:"content"},G={class:"time"},J=y(()=>o("div",{class:"colon"},":",-1)),K={class:"time"},L=y(()=>o("div",{class:"colon"},":",-1)),O={class:"time"},Q={class:"content"},U={class:"time"},X=y(()=>o("div",{class:"colon"},":",-1)),Z={class:"time"},ee=y(()=>o("div",{class:"colon"},":",-1)),se={class:"time"},ae=N({__name:"index",props:{title:{default:""},value:{default:void 0},future:{type:Boolean,default:!0},format:{default:"HH:mm:ss"},prefix:{default:""},suffix:{default:""},titleStyle:{default:()=>({})},valueStyle:{default:()=>({})},finishedText:{default:"00:00:00"}},emits:["finish"],setup(f,{emit:A}){const a=f,k=c(),T=c(),b=c(1),g=c(1),v=c(0),t=c(),C=A;B(()=>{b.value=k.value.offsetWidth,g.value=T.value.offsetWidth});const i=I(()=>({showMillisecond:a.format.includes("SSS"),showYear:a.format.includes("Y"),showMonth:a.format.includes("M"),showDay:a.format.includes("D"),showHour:a.format.includes("H"),showMinute:a.format.includes("m"),showSecond:a.format.includes("s")}));function r(e){return e<10?"0"+e:String(e)}function M(e){if(e===null)return"--";let s=a.format;if(i.value.showMillisecond){var F=e%1e3;s=s.replace("SSS","0".repeat(3-String(F).length)+F)}if(e=Math.floor(e/1e3),i.value.showYear){var h=Math.floor(e/31104e3);s=s.includes("YY")?s.replace("YY",r(h)):s.replace("Y",String(h))}else var h=0;if(i.value.showMonth){e=e-h*60*60*24*30*12;var p=Math.floor(e/(60*60*24*30));s=s.includes("MM")?s.replace("MM",r(p)):s.replace("M",String(p))}else var p=0;if(i.value.showDay){e=e-p*60*60*24*30;var m=Math.floor(e/(60*60*24));s=s.includes("DD")?s.replace("DD",r(m)):s.replace("D",String(m))}else var m=0;if(i.value.showHour){e=e-m*60*60*24;var w=Math.floor(e/(60*60));s=s.includes("HH")?s.replace("HH",r(w)):s.replace("H",String(w))}else var w=0;if(i.value.showMinute){e=e-w*60*60;var _=Math.floor(e/60);s=s.includes("mm")?s.replace("mm",r(_)):s.replace("m",String(_))}else var _=0;if(i.value.showSecond){var Y=e-_*60;s=s.includes("ss")?s.replace("ss",r(Y)):s.replace("s",String(Y))}return s}function H(){v.value>Date.now()?(t.value=v.value-Date.now(),q(H)):(t.value=0,C("finish"))}return $(()=>{Number.isFinite(a.value)?(a.future?a.value>=Date.now()&&(v.value=a.value):a.value>=0&&(v.value=a.value+Date.now()),q(H)):t.value=null}),(e,s)=>(n(),u("div",W,[o("div",{class:"u-title",style:x(e.titleStyle)},[S(e.$slots,"title",{},()=>[D(l(a.title),1)],!0)],4),o("div",P,[b.value?(n(),u(R,{key:0},[b.value||t.value>0||t.value===null?(n(),u("span",{key:0,ref_key:"prefixRef",ref:k,class:"u-prefix"},[S(e.$slots,"prefix",{},()=>[D(l(e.prefix),1)],!0)],512)):d("",!0)],64)):d("",!0),e.finishedText&&t.value===0&&t.value!==null?(n(),u("span",{key:1,class:"u-time-value",style:x(e.valueStyle)},[S(e.$slots,"finish",{},()=>[o("div",j,[o("div",G,l(e.finishedText.substring(0,2)),1),J,o("div",K,l(e.finishedText.substring(3,5)),1),L,o("div",O,l(e.finishedText.substring(6,8)),1)])],!0)],4)):d("",!0),Number.isFinite(t.value)&&t.value>0?(n(),u("span",{key:2,class:"u-time-value",style:x(e.valueStyle)},[o("div",Q,[o("div",U,l(M(t.value).substring(0,2)),1),X,o("div",Z,l(M(t.value).substring(3,5)),1),ee,o("div",se,l(M(t.value).substring(6,8)),1)])],4)):d("",!0),g.value?(n(),u(R,{key:3},[g.value||t.value>0||t.value===null?(n(),u("span",{key:0,ref_key:"suffixRef",ref:T,class:"u-suffix"},[S(e.$slots,"suffix",{},()=>[D(l(e.suffix),1)],!0)],512)):d("",!0)],64)):d("",!0)])]))}});const oe=E(ae,[["__scopeId","data-v-0ba2d85e"]]);export{oe as C};
