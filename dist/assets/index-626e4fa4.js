var st=Object.defineProperty;var at=(b,a,n)=>a in b?st(b,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):b[a]=n;var w=(b,a,n)=>(at(b,typeof a!="symbol"?a+"":a,n),n);import{al as Ue,am as $,an as oe,ag as S,b0 as it,bf as Ge,b1 as lt,a_ as We,$ as ot,a$ as ct,b2 as nt,ad as dt,b3 as D,aa as rt,au as l,av as c,aH as e,a4 as I,ah as t,bb as Fe,b5 as s,b6 as C,bd as B,ck as d,aF as Y,aY as se,b7 as le,bc as U,bq as He,cD as _t,bg as ht,bB as ut,be as ae,bk as ft,b9 as je,ba as Ke,at as ce,br as pt,aE as De}from"./index-1e3b5e9c.js";import{a as ze,M as vt}from"./match-api-service-85ee51bf.js";import{a as xt,B as X}from"./match-data-ext-5e1df082.js";import{N as bt}from"./nft-data-00f9cd4d.js";import{B as mt}from"./battle-contract-service-bdced59b.js";import{C as Me}from"./index-1a933474.js";import{B as gt}from"./battle-pool-contract-service-be03c21e.js";import{C as wt}from"./contract-api-service-fb5a844b.js";import{T as p}from"./publicUnit-82a6e2b0.js";import{R as yt}from"./air-drop-2b775382.js";import{b as At}from"./TimeFormatting-2526bf3a.js";import{M as kt,D as Tt,a as It}from"./bignumber-c053b17e.js";import{C as Bt}from"./chain-api-service-e57c2855.js";import{P as Nt}from"./index-dd31fe32.js";import"./transaction-api-service-8b388dbb.js";import"./utils-518c8eb5.js";import"./contract-data-service-bee1e717.js";import"./index-f42bfe17.js";import"./firstNotUndefined-748ee901.js";class Pt{constructor(a){w(this,"id");w(this,"matchId");w(this,"nftAddress");w(this,"tokenId");w(this,"bidderAddress");w(this,"bidPrice");w(this,"biddedAt");w(this,"refundableAmount");w(this,"refundedAt");w(this,"expectedBonus");w(this,"bidTxHash");w(this,"bonus");w(this,"lostAmount");w(this,"settledAt");w(this,"settleTxHash");w(this,"chainId");w(this,"nftData");w(this,"matchDataExt");this.id=a.id,this.matchId=a.matchId,this.nftAddress=a.nftAddress,this.tokenId=Number(a.tokenId),this.bidderAddress=a.bidderAddress,this.bidPrice=Number(a.bidPrice),this.biddedAt=new Date(a.biddedAt),this.refundableAmount=Number(a.refundableAmount),this.refundedAt=a.refundedAt,this.expectedBonus=Number(a.expectedBonus),this.bidTxHash=a.bidTxHash,this.bonus=Number(a.bonus),this.lostAmount=Number(a.lostAmount),this.settledAt=a.settledAt,this.settleTxHash=a.settleTxHash,this.chainId=Number(a.chainId),this.nftData=new bt(a.nftData),this.matchDataExt=new xt(a.matchDataExt)}}class St extends Ue{async getBidDataListByMatchId(a){const n=this.gateway+"/bid/match/"+a,r=await $.get(n);return this.checkResponse(r),r.data.data.map(u=>new X(u))}async getBidDataListByMatchIdAndNftAddress(a,n,r){const h=this.gateway+"/bid/match-nft/"+a+"/"+n+"/"+r,u=await $.get(h);return this.checkResponse(u),u.data.data.map(f=>new X(f))}async getBidDataListByUserAddress(a){const n=this.gateway+"/bid/user/"+a,r=await $.get(n);return this.checkResponse(r),r.data.data.map(u=>new X(u))}async getBidDataExtListByUserAddress(a){const n=this.gateway+"/bid/user-ext/"+a,r=await $.get(n);return this.checkResponse(r),r.data.data.map(u=>new X(u))}async getBidDataExtListByNftAddress(a,n){const r=this.gateway+"/bid/nft-ext/"+a+"/"+n,h=await $.get(r);return this.checkResponse(h),h.data.data.map(i=>new Pt(i))}async getNewBidPrice(a,n,r){const h=this.gateway+"/bid/price/"+a+"/"+n+"/"+r,u=await $.get(h);this.checkResponse(u);const i=u.data.data;return ze(i)}async getLastBidData(a,n,r){const h=this.gateway+"/bid/last/"+a+"/"+n+"/"+r,u=await $.get(h);this.checkResponse(u);const i=u.data.data;return i?new X(i):null}}const Le="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAArRJREFUSEvt1ktrE1EUB/D/uZPETNoqtaIIbehGRFeVQqmiYGyb1yRKqSCKO9EPoLhx60bED6AbRXShrkrzah5tBRWpC0EUrVoFH2hBDSJNJiYz98gItXaaPtSkC+msBs6d87tz5p7DEGp4jfHeRrOselEhLyuiDYCXwW0EeK17ItpYlub2sCf1nmrl5vTIOANdS+WTFdoWWBubqBmcLYR2QIgEQJsXw2sOW9iYHmw34BgGsHUhvC6wheW4v4X1cg5EHdXwusHZYngAJK4BUFcMzujaGQKdBSBWpNS5bz0t7FIvg7HfBhpMGCTGAICfB7lmpc4UImEIvkSg1rkofxQQR3vU2Gha144J0EUAjn+Gk8VQq5PEeYAO20Am4KrhNk4FKZ2fiWVLmgbGTQcpHT730OQf93G66G8TwnkSoBNgeGzoPYPpdMgTv1/tG49xdIOPYp+t2LJgZlCmEO4VijgOcD9ADlviO0w453fHk0tNrpn4onBmOtxBijgE4Ig1a39PysAkMQ+aDroedMUfzcSseV0pNSQItKnKJvIsvx/0N2Q/zIGZIUYNrZtNOsCMfgBbrIeZ+RMIz8D0WBIeKOC7fWridbW3Gy5GuhTC+ILtJGU00JCM/4JTerBdgXMPQaokKA/JX1hgSroqbwOUKSy3hCPlSJc0F4aJKNrrjs3Cy018691OdV1r07wBEUCmCALXBR6paLukQf7qm5Rv+tTklfrApUhUMjqrwszTfZ7EhVXYXp15hyv+VWte46Im+8KKbkp1vT7lo9vGSD1KnS6EQoBin0g/9+FQzKc97tSrOsGR6EIt5VTEi33uoeer8JwK/W07pQurpZ4t5P95uFLFyG7BaJ43aQDTyfKhrzE5NVrWOqWJMIMU+zrJPBHwJG5YvzdGiZ8AqPIjwHkm6va74y9/AGIw9i5HgmasAAAAAElFTkSuQmCC",Ct="data:image/png;base64,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";class Re extends Ue{async getNewBidPrice(a,n,r){const h=this.gateway+"/bid/v2/price/"+a+"/"+n+"/"+r,u=await $.get(h);this.checkResponse(u);const i=u.data.data;return ze(i)}}const v=b=>(je("data-v-901d8888"),b=b(),Ke(),b),Et={class:"space-y-8 sale"},Ft={key:0,class:"relative p-10 space-y-3 line pc_battle_info"},Ht={class:"flex just-center"},Dt={class:"flex items-center justify-start w-1/3 ml-[80px]"},Mt={class:"flex flex-col items-start"},Lt={class:"text-white text-[20px]"},Rt={class:"text-[13px] text-white/50"},Ut={class:"w-1/3 text-center"},Gt={class:"text-sm font-medium text-white/50"},Wt=v(()=>e("div",{class:"text-[#BBF74C] text-[30px]"},"VS",-1)),jt={class:"text-white text-[15px]"},Kt={class:"flex items-center justify-end w-1/3 mr-[80px]"},zt={class:"flex flex-col items-end"},Jt={class:"text-white text-[20px] text-end"},Ot={class:"text-[13px] text-white/50"},Vt={key:1,class:"m_battle"},$t={class:"m_battle_info_top"},Qt={class:"text-center"},Zt={class:"text-[12px] font-medium text-white/50"},Yt=v(()=>e("div",{class:"text-[#BBF74C] text-[25px]"},"VS",-1)),qt={class:"text-white text-[14px]"},Xt={key:2,class:"p-[30px] space-y-3 m1 rounded-[2px] pc_battle_info"},es={class:"text-lg text-white"},ts={class:"flex space-x-[30px] h-[160px]"},ss={class:"flex items-center flex-grow"},as={class:"w-1/3 unified"},is={class:"text-base f-color-1 default-pf"},ls=["innerHTML"],os={class:"text-4xl font-bold font-primary"},cs={class:"text-base"},ns=["src"],ds={class:"text-base f-color-2 default-pf"},rs={class:"w-1/3 unified"},_s={class:"text-base f-color-1 default-pf"},hs=["innerHTML"],us={class:"text-4xl font-bold font-primary"},fs={class:"text-base"},ps={class:"text-base f-color-2 default-pf"},vs={class:"w-1/3 unified"},xs={class:"text-base f-color-1 default-pf"},bs=["innerHTML"],ms={class:"text-4xl font-bold",style:{color:"#ee0002"}},gs={class:"text-base"},ws={class:"text-base f-color-2 default-pf"},ys={key:3,class:"m_battle_bid"},As={class:"bid_nft_info"},ks={class:"nft_info"},Ts={class:"nft_info_name"},Is={class:"nft_info_symbol"},Bs={class:"bid_info"},Ns={class:"unified"},Ps={class:"text-xs f-color-1 default-pf"},Ss=["innerHTML"],Cs={class:"text-[22px] font-primary"},Es={class:"text-[22px]"},Fs=["src"],Hs={class:"text-xs f-color-2 default-pf"},Ds=v(()=>e("div",{class:"m_line"},null,-1)),Ms={class:"unified"},Ls={class:"text-xs f-color-1 default-pf"},Rs=["innerHTML"],Us={class:"text-[22px] font-primary"},Gs={class:"text-[22px]"},Ws={class:"text-xs f-color-2 default-pf"},js=v(()=>e("div",{class:"m_line"},null,-1)),Ks={class:"unified"},zs={class:"text-xs f-color-1 default-pf"},Js=["innerHTML"],Os={class:"text-[22px]",style:{color:"#ee0002"}},Vs={class:"text-[22px]"},$s={class:"text-xxxs f-color-2 default-pf"},Qs={key:4,class:"px-5 py-10 m2 rounded-[2px] pc_battle_info"},Zs={key:0,class:"flex items-center text-sm"},Ys={class:"flex items-center justify-end w-40 pr-3 text-lg text-right font-primary"},qs=["src"],Xs={key:0,class:"flex flex-col justify-end h-[45px]"},ea=v(()=>e("p",{style:{background:"#3b3b3b",width:"1px"},class:"h-1/2"},null,-1)),ta=[ea],sa={class:"relative"},aa={key:0,class:"absolute bottom-0 w-full text-center f-1 default-pf"},ia=v(()=>e("p",{style:{background:"#3b3b3b",height:"1px"},class:"w-20"},null,-1)),la={class:"text-[15px]"},oa={class:"text-[15px] mx-1"},ca={class:"flex flex-col justify-center default-pf"},na={class:"flex h-20"},da=v(()=>e("div",{class:"flex flex-col justify-end"},[e("p",{style:{background:"#3b3b3b",width:"1px"},class:"h-1/2"})],-1)),ra={class:"flex items-center"},_a=v(()=>e("p",{style:{height:"1px",background:"#3a3a3a"},class:"w-8"},null,-1)),ha={class:"px-2 text-sm text-white"},ua=v(()=>e("p",{style:{height:"1px",background:"#3a3a3a"},class:"w-6"},null,-1)),fa={class:"flex"},pa=v(()=>e("div",{class:"flex flex-col justify-end"},[e("p",{style:{background:"#3b3b3b",width:"1px"},class:"h-1/2"})],-1)),va={class:"flex items-center py-3 space-x-2"},xa=v(()=>e("p",{style:{height:"1px",background:"#3a3a3a"},class:"w-6"},null,-1)),ba={class:"text-sm text-white"},ma=["innerHTML"],ga={class:"flex"},wa=v(()=>e("div",{class:"flex flex-col justify-start"},[e("p",{style:{background:"#3b3b3b",width:"1px"},class:"h-1/2"})],-1)),ya={class:"flex items-center py-3 space-x-2"},Aa=v(()=>e("p",{style:{height:"1px",background:"#3a3a3a"},class:"w-6"},null,-1)),ka={class:"text-sm text-white"},Ta=["innerHTML"],Ia={class:"flex items-center h-20 default-pf"},Ba=v(()=>e("div",{class:"flex flex-col justify-start h-full"},[e("p",{style:{background:"#3b3b3b",width:"1px"},class:"h-1/2"})],-1)),Na={class:"flex items-center"},Pa=v(()=>e("p",{style:{height:"1px",background:"#3a3a3a"},class:"w-8"},null,-1)),Sa={class:"flex items-center px-2 text-sm text-white"},Ca=v(()=>e("p",{style:{background:"#3b3b3b",height:"1px"},class:"w-12 mx-2"},null,-1)),Ea=["innerHTML"],Fa={class:"mark_icon w-[20px] h-[20px] cursor-pointer"},Ha=["src"],Da={key:0},Ma={key:1},La={class:"relative h-full"},Ra={key:0,style:{background:"#3b3b3b",width:"1px"},class:"absolute top-0 h-1/2"},Ua={key:1,style:{background:"#3b3b3b",width:"1px"},class:"absolute bottom-0 h-1/2"},Ga={class:"relative"},Wa={class:"absolute bottom-0 w-full text-center f-1 default-pf"},ja={key:0},Ka={key:1},za=v(()=>e("p",{style:{background:"#3b3b3b",height:"1px"},class:"w-20"},null,-1)),Ja={class:"flex items-center justify-center w-40 h-10",style:{border:"1px solid #3a3a3a"}},Oa={key:0},Va={class:"flex items-center justify-between flex-grow h-10 px-5 default-pf",style:{background:"#000000",border:"1px solid #3a3a3a"}},$a={class:"w-1/3"},Qa={class:"w-1/3 text-center"},Za={key:0},Ya={key:1},qa={class:"w-1/3 text-right"},Xa={key:5,class:"m_battle_info"},ei={class:"m_title"},ti={key:0,class:"m_content"},si={class:"m_left"},ai=v(()=>e("div",{class:"left_title"},[e("div",{class:"invisible m_percent_vertical"}),e("div",{class:"m_percent"},"4%")],-1)),ii=v(()=>e("div",{class:"m_line"},null,-1)),li={class:"bid_info"},oi={class:"bid_first"},ci={class:"m_left"},ni={class:"left_title"},di=v(()=>e("div",{class:"m_percent"},"4%",-1)),ri=v(()=>e("div",{class:"m_line"},null,-1)),_i={class:"bid_info"},hi={class:"bid_price"},ui={key:0},fi={class:"m_address"},pi={class:"m_tip"},vi={class:"modal_title"},xi={class:"vote_nft font-f"},bi={class:"text-[20px]"},mi=oe({__name:"Sale",setup(b){const a=S(),n=S(()=>a.value),{open:r}=it(),h=Ge(),u=lt(),{t:i}=We(),f=S(!1),y=S(!1),N=function(A){return i(`views.flashSale.saleFight.${A}`)},E=S(),M=S(),z=S(),o=S([]),ne=ot(),te=S(0),Z=S(0),J=S(0),x=ct(),de=Date.now(),F=S(!1),re=new vt,_e=new St,Je=new wt,Oe=new yt,he=S(),Ve=S(()=>he.value),{chain:ie}=nt(),{match_id:$e,nft_address:Qe,token_id:Ze}=h.query,Ye=new Bt,ue=S();dt(async()=>{try{await pe("first"),await tt()}catch(A){D(A.message,"error",!1)}});const fe=()=>{F.value=!0},qe=()=>{F.value=!1},Xe=async()=>{var j,W,O,G;if(!x.address){r();return}if(!((j=z.value)!=null&&j.bidPrice)){f.value=!0,D(i("views.flashSale.t1"),"warning",!1);return}const A=(W=M.value)==null?void 0:W.nftAddress,k=Number((O=M.value)==null?void 0:O.nftTokenId),H=(G=E.value)==null?void 0:G.matchId;f.value=!0;try{const V=await Je.getNFTStatus(A,Number(k));if(x.address==V.ownerInPool&&o.value.length==0){D(i("views.flashSale.t9"),"warning",!1),f.value=!1,F.value=!1;return}const m=await re.getMatchDataByMatchId(ne,H);if(!m){D(i("views.flashSale.t2"),"error",!1),f.value=!1,F.value=!1;return}const g=await _e.getLastBidData(m.matchId,A,k);if(g&&g.bidderAddress==x.address){f.value=!1,F.value=!1,D(i("views.flashSale.t8"),"error",!1);return}const P=await new Re().getNewBidPrice(m.matchId,A,k);if(!P||P.bidPrice==0){D(i("views.flashSale.t3"),"error",!1),f.value=!1,F.value=!1;return}if(A==m.arenaCreatorNftAddress&&k==m.arenaCreatorTokenId){if(P.bidPrice<m.arenaCreatorNftSoldPrice){D(i("views.flashSale.t3"),"error",!1),f.value=!1,F.value=!1;return}}else if(A==m.challengerNftAddress&&k==m.challengerTokenId){if(P.bidPrice<m.challengerNftSoldPrice){f.value=!1,F.value=!1,D(i("views.flashSale.t3"),"error",!1);return}}else{f.value=!1,F.value=!1,D(i("views.flashSale.t4"),"error",!1);return}const L=await mt.connect();let R="";if(await(await gt.connect()).getUserBalance(x.address)>=P.bidPrice)R=await L.bidWithBalance(m.matchId,A,k,P.bidPrice),console.log("bidWithBalance() tx_hash",R),await L.waitForTransaction(R);else{if(!await ut(x.address,L.getChainId(),P.bidPrice)){D(i("views.flashSale.t6",{unit:p}),"error",!1),f.value=!1,F.value=!1;return}R=await L.bid(m.matchId,A,k,P.bidPrice),console.log("bid() tx_hash",R)}await L.waitForTransaction(R),await Oe.everyDayTrade(x.address,{itemType:"trade",chainId:ie==null?void 0:ie.id}),pe("second"),D(i("views.flashSale.t5"),"success",!1),f.value=!1,F.value=!1}catch(V){D(V.message,"error",!1),f.value=!1,F.value=!1}},pe=async A=>{var k,H,j,W,O;A=="first"&&(y.value=!0);try{const G=Number(Ze),V=$e,m=Qe,g=await re.getMatchDataExtByMatchId(V);m==g.arenaCreatorNftAddress&&G==g.arenaCreatorTokenId?(M.value=g.arenaCreatorNFTData,g.challengerNftSoldPrice>0&&(te.value=g.arenaNftPromotableFee)):m==g.challengerNftAddress&&G==g.challengerTokenId?(M.value=g.challengerNFTData,g.arenaCreatorNftSoldPrice>0&&(te.value=g.challengeNftPromotableFee)):D(i("views.flashSale.t4"),"error",!1,1,()=>{u.back()}),E.value=g;const P=await new Re().getNewBidPrice(g.matchId,m,G);z.value=P,Z.value=P.expectedBonus,J.value=P.expectedLost;let L=await _e.getBidDataListByMatchIdAndNftAddress(g.matchId,m,G);f.value=!1;let R=[];for(let K=0;K<L.length;K++){const Q=L[K];K==L.length-1?R.push({...Q,raisePrice:0}):R.push({...Q,raisePrice:Number(Q.bidPrice-L[K+1].bidPrice)})}o.value=R,console.log("bid_data_list.value",o.value),((k=o.value[0])==null?void 0:k.bidderAddress)==x.address&&(Z.value=((H=o.value[0])==null?void 0:H.bidPrice)*.04,((j=o.value)==null?void 0:j.length)>1?J.value=((W=o.value[1])==null?void 0:W.bidPrice)*.04:J.value=((O=o.value[0])==null?void 0:O.bidPrice)*.04)}catch(G){D(G.message,"error",!1)}finally{y.value=!1}},et=rt(()=>{var j,W;const A=o.value.length,k=(j=o.value[A-1])==null?void 0:j.bidPrice,H=(W=o.value[0])==null?void 0:W.bidPrice;return H&&k&&A?kt(Tt(It(H,k),k),100).toFixed(2):0}),tt=async()=>{ue.value=await Ye.getChainDataById(ne)};return(A,k)=>{var W,O,G,V,m,g,P,L,R,K,Q,ve,xe,be,me,ge,we,ye,Ae,ke,Te,Ie,Be,Ne,Pe,Se,Ce,Ee;const H=ae,j=ft;return l(),c(se,null,[e("div",Et,[I(t(Fe),{spinning:y.value},null,8,["spinning"]),y.value?C("",!0):(l(),c("section",Ft,[e("div",Ht,[e("div",Dt,[I(H,{width:80,height:80,src:(W=E.value)==null?void 0:W.arenaCreatorNFTData.cacheImageUrl,class:"flex-shrink-0 mr-5"},null,8,["src"]),e("div",Mt,[e("div",Lt,s(((O=E.value)==null?void 0:O.arenaCreatorNFTData.name)+" #"+((G=E.value)==null?void 0:G.arenaCreatorNFTData.nftTokenId)),1),e("div",Rt,s((V=E.value)==null?void 0:V.arenaCreatorNFTData.symbol),1)])]),e("div",Ut,[e("div",Gt,s(t(i)("views.flashSale.saleFight.t17")),1),Wt,e("div",jt,[I(Me,{value:new Date((m=E.value)==null?void 0:m.matchEndTime).getTime()-t(de),future:!1,format:"HH:mm:ss"},null,8,["value"])])]),e("div",Kt,[e("div",zt,[e("div",Jt,s(((g=E.value)==null?void 0:g.challengerNFTData.name)+" #"+((P=E.value)==null?void 0:P.challengerNFTData.nftTokenId)),1),e("div",Ot,s((L=E.value)==null?void 0:L.challengerNFTData.symbol),1)]),I(H,{width:80,height:80,src:(R=E.value)==null?void 0:R.challengerNFTData.cacheImageUrl,class:"flex-shrink-0 ml-5"},null,8,["src"])])])])),y.value?C("",!0):(l(),c("section",Vt,[e("div",$t,[I(H,{width:100,src:(K=E.value)==null?void 0:K.arenaCreatorNFTData.cacheImageUrl},null,8,["src"]),e("div",Qt,[e("div",Zt,s(t(i)("views.flashSale.saleFight.t17")),1),Yt,e("div",qt,[I(Me,{value:new Date((Q=E.value)==null?void 0:Q.matchEndTime).getTime()-t(de),future:!1,format:"HH:mm:ss"},null,8,["value"])])]),I(H,{width:100,src:(ve=E.value)==null?void 0:ve.challengerNFTData.cacheImageUrl},null,8,["src"])])])),y.value?C("",!0):(l(),c("section",Xt,[e("p",es,s(N("t1"))+" "+s((xe=M.value)==null?void 0:xe.name)+" #"+s((be=M.value)==null?void 0:be.nftTokenId),1),e("div",ts,[I(H,{width:160,height:160,src:(me=M.value)==null?void 0:me.cacheImageUrl,class:"flex-shrink-0"},null,8,["src"]),e("div",ss,[e("div",as,[e("p",is,[e("span",{innerHTML:t(i)("views.flashSale.saleFight.t2")},null,8,ls)]),e("p",os,[B(s(t(d)(te.value,5))+" ",1),e("span",cs,s(t(p))+"  ",1),e("img",{src:t(Le),alt:""},null,8,ns)]),e("p",ds,s(N("t3")),1)]),e("div",rs,[e("p",_s,[e("span",{innerHTML:t(i)("views.flashSale.saleFight.t4")},null,8,hs)]),e("p",us,[B(s(t(d)(Z.value,5)==0?"<0.000001":"+"+t(d)(Z.value,5))+" ",1),e("span",fs,s(t(p)),1)]),e("p",ps,s(N("t5")),1)]),e("div",vs,[e("p",xs,[e("span",{innerHTML:t(i)("views.flashSale.saleFight.t6")},null,8,bs)]),e("p",ms,[B(s(t(d)(J.value,5)==0?"<0.000001":"-"+t(d)(J.value,5))+" ",1),e("span",gs,s(t(p)),1)]),e("p",ws,s(N("t7")),1)])])])])),y.value?C("",!0):(l(),c("section",ys,[e("div",As,[I(H,{class:"nft_img",width:50,src:(ge=M.value)==null?void 0:ge.cacheImageUrl},null,8,["src"]),e("div",ks,[e("p",Ts,s((we=M.value)==null?void 0:we.name)+" #"+s((ye=M.value)==null?void 0:ye.nftTokenId),1),e("p",Is,s((Ae=M.value)==null?void 0:Ae.symbol),1)])]),e("div",Bs,[e("div",Ns,[e("p",Ps,[e("span",{innerHTML:t(i)("views.flashSale.saleFight.t2")},null,8,Ss)]),e("p",Cs,[B(s(t(d)(te.value,5))+" ",1),e("span",Es,s(t(p))+"  ",1),e("img",{src:t(Le),alt:""},null,8,Fs)]),e("p",Hs,s(N("t3")),1)]),Ds,e("div",Ms,[e("p",Ls,[e("span",{innerHTML:t(i)("views.flashSale.saleFight.t4")},null,8,Rs)]),e("p",Us,[B(s(t(d)(Z.value,5)==0?"<0.000001":"+"+t(d)(Z.value,5))+" ",1),e("span",Gs,s(t(p)),1)]),e("p",Ws,s(N("t5")),1)]),js,e("div",Ks,[e("p",zs,[e("span",{innerHTML:t(i)("views.flashSale.saleFight.t6")},null,8,Js)]),e("p",Os,[B(s(t(d)(J.value,5)==0?"<0.000001":"-"+t(d)(J.value,5))+" ",1),e("span",Vs,s(t(p)),1)]),e("p",$s,s(N("t7")),1)])])])),y.value?C("",!0):(l(),c("section",Qs,[((ke=o.value[0])==null?void 0:ke.bidderAddress)!=t(x).address||!t(x).address?(l(),c("div",Zs,[e("div",Ys,[B(" +"+s(t(d)(t(d)((((Te=z.value)==null?void 0:Te.bidPrice)??0)-(((Ie=o.value[0])==null?void 0:Ie.bidPrice)??0)),5))+" ",1),e("img",{src:(Be=ue.value)==null?void 0:Be.icon,alt:"",class:"w-[20px] h-[20px] ml-[5px] rounded-full"},null,8,qs)]),o.value.length!==0?(l(),c("div",Xs,ta)):C("",!0),e("div",sa,[o.value.length!==0?(l(),c("div",aa," +4% ")):C("",!0),ia]),e("div",{class:"flex items-center justify-center h-[44px] font-bold text-black w-44 bg-primary sale_btn",onClick:fe},[e("span",la,s(t(d)((Ne=z.value)==null?void 0:Ne.bidPrice,5)),1),e("span",oa,s(t(p)),1),B(s(N("t9"))+" ",1)]),e("div",{ref_key:"popoverE",ref:he},[I(t(Nt),{placement:"right",getPopupContainer:Ve.value},{content:Y(()=>{var _;return[e("div",ca,[e("div",na,[da,e("div",ra,[_a,e("div",ha,s(N("t10")),1),ua,e("div",null,[e("div",fa,[pa,e("div",va,[xa,e("div",ba,[e("span",{innerHTML:t(i)("views.flashSale.saleFight.t12")},null,8,ma)])])]),e("div",ga,[wa,e("div",ya,[Aa,e("div",ka,[e("span",{innerHTML:t(i)("views.flashSale.saleFight.t11",{unit:t(p),price:t(d)((_=z.value)==null?void 0:_.expectedBonus,5)})},null,8,Ta)])])])])])]),e("div",Ia,[Ba,e("div",Na,[Pa,e("div",Sa,[e("div",null,s(N("t13")),1),Ca,e("div",null,[e("span",{innerHTML:t(i)("views.flashSale.saleFight.t16",{unit:t(p),price:Number(t(d)(J.value,5))})},null,8,Ea)])])])])])]}),default:Y(()=>[e("div",Fa,[e("img",{src:t(Ct),alt:""},null,8,Ha)])]),_:1},8,["getPopupContainer"])],512)])):C("",!0),(l(!0),c(se,null,le(o.value,(_,T)=>(l(),c("div",{class:U(["flex items-center text-[#666] h-20 text-sm",{color:_.bidderAddress==t(x).address}]),key:T},[e("div",{class:U(["w-40 pr-3 text-right",{selfColor:o.value[0].bidderAddress==t(x).address&&T==0}])},[T==o.value.length-1?(l(),c("span",Da,s(N("t8")),1)):(l(),c("span",Ma,"+"+s(t(d)(_.raisePrice,5))+s(t(p)),1))],2),e("div",La,[T!=0||o.value[0].bidderAddress!=t(x).address?(l(),c("p",Ra)):C("",!0),T!=o.value.length-1?(l(),c("p",Ua)):C("",!0)]),e("div",Ga,[e("div",Wa,[T==o.value.length-1?(l(),c("span",ja,"0%")):(l(),c("span",Ka,"+4%"))]),za]),e("div",Ja,[T==o.value.length-1?(l(),c("span",Oa,s(t(d)(_.bidPrice,5))+" "+s(t(p)),1)):(l(),c("span",{key:1,class:U({selfColor:o.value[0].bidderAddress==t(x).address&&T==0})},s(t(d)(_.bidPrice,5))+" "+s(t(p)),3))]),e("div",Va,[e("p",$a,s(t(He)(_.bidderAddress)),1),e("p",Qa,[T!==0?(l(),c("span",Za,s(N("t15"))+" "+s(t(d)(_.expectedBonus,5))+" "+s(t(p)),1)):(l(),c("span",Ya,s(N("t14")),1))]),e("p",qa,s(t(_t)(_.biddedAt)),1)])],2))),128))])),y.value?C("",!0):(l(),c("section",Xa,[e("div",ei,s(t(i)("views.flashSale.saleFight.t18",{number:o.value.length,count:et.value})),1),((Pe=o.value[0])==null?void 0:Pe.bidderAddress)!=t(x).address||!t(x).address?(l(),c("div",ti,[e("div",si,[ai,ii,e("div",{class:U(["m_vertical_short",{invisible:o.value.length==0}])},null,2)]),e("div",li,[e("div",{class:"bid_open",onClick:fe},[B(s(t(d)((Se=z.value)==null?void 0:Se.bidPrice,5)),1),e("span",null,s(t(p)),1),B(s(N("t9")),1)]),e("div",oi," +"+s(t(d)(t(d)((((Ce=z.value)==null?void 0:Ce.bidPrice)??0)-(((Ee=o.value[0])==null?void 0:Ee.bidPrice)??0)),5))+" "+s(t(p)),1)])])):C("",!0),(l(!0),c(se,null,le(o.value,(_,T)=>{var q;return l(),c("div",{class:"m_content",key:T},[e("div",ci,[e("div",ni,[e("div",{class:U(["m_percent_vertical",{invisible:o.value.length==0||((q=o.value[0])==null?void 0:q.bidderAddress)==t(x).address&&T==0}])},null,2),di]),ri,e("div",{class:U(["m_vertical",{invisible:T==o.value.length-1}])},null,2)]),e("div",_i,[e("div",hi,[e("div",{class:U(["m_price",{selfColor:_.bidderAddress==t(x).address}])},[B(s(t(d)(_.bidPrice,5))+" "+s(t(p))+" ",1),T==o.value.length-1?(l(),c("span",ui,s(N("t8")),1)):C("",!0)],2),e("div",{class:U(["m_time",{selfColor:_.bidderAddress==t(x).address}])},s(t(At)(_.biddedAt)),3)]),e("div",{class:U(["m_earn",{selfColors:_.bidderAddress==t(x).address}])},"+ "+s(t(d)(_.raisePrice,5))+" "+s(t(p)),3),e("div",{class:U(["m_user_info",{selfColor:_.bidderAddress==t(x).address}])},[e("div",fi,s(t(He)(_.bidderAddress)),1),e("div",pi,s(t(i)("views.flashSale.saleFight.t19")),1)],2)])])}),128))]))]),e("div",{ref_key:"aModal",ref:a},[I(t(ht),{open:F.value,"onUpdate:open":k[0]||(k[0]=_=>F.value=_),centered:"",onCancel:qe,maskClosable:!1,keyboard:!1,okText:t(i)("views.fightInfo.buttonT"),width:460,getContainer:n.value},{footer:Y(()=>[I(t(Fe),{spinning:f.value},{default:Y(()=>[I(j,{onClick:Xe,class:"vote_ok event_bid_nft"},{default:Y(()=>[B(s(t(i)("views.fightInfo.buttonT")),1)]),_:1})]),_:1},8,["spinning"])]),default:Y(()=>{var _,T,q;return[e("div",vi,s(t(i)("views.fightInfo.t58",{nft:((_=M.value)==null?void 0:_.name)+" #"+((T=M.value)==null?void 0:T.nftTokenId)})),1),e("div",xi,[B(s(t(d)((q=z.value)==null?void 0:q.bidPrice,5))+" ",1),e("span",bi,s(t(p)),1)])]}),_:1},8,["open","okText","getContainer"])],512)],64)}}});const gi=ce(mi,[["__scopeId","data-v-901d8888"]]),ee=b=>(je("data-v-f559d5c0"),b=b(),Ke(),b),wi={class:"space-y-8 sale"},yi={class:"relative p-10 space-y-3 line"},Ai={class:"flex just-center"},ki={class:"flex items-center justify-end w-1/3"},Ti=ee(()=>e("div",{class:"flex flex-col items-start"},[e("div",{class:"text-white text-[20px]"},"PUDGY #5273"),e("div",{class:"text-[13px] text-white/50"},"Pudgy Penguins")],-1)),Ii=ee(()=>e("div",{class:"w-1/3 text-center"},[e("div",{class:"text-sm font-medium text-white/50"},"投票中"),e("div",{class:"text-[#BBF74C] text-[30px]"},"VS"),e("div",{class:"text-white text-[15px]"},"23:59:58")],-1)),Bi={class:"flex items-center justify-start w-1/3"},Ni=ee(()=>e("div",{class:"flex flex-col items-end"},[e("div",{class:"text-white text-[20px]"},"MFER #5273"),e("div",{class:"text-[13px] text-white/50"},"Mfers")],-1)),Pi={class:"p-[30px] space-y-3 m1"},Si={class:"text-lg text-white"},Ci={class:"flex space-x-[50px]"},Ei={class:"flex items-center flex-grow"},Fi={class:"w-1/3 space-y-1"},Hi={class:"text-base f-1 font-pf"},Di={class:"text-4xl font-bold font-primary"},Mi={class:"text-base"},Li={class:"text-base f-2 font-pf"},Ri={class:"w-1/3 space-y-1"},Ui={class:"text-base f-1 font-pf"},Gi={class:"text-4xl font-bold font-primary"},Wi={class:"text-base"},ji={class:"text-base f-2 font-pf"},Ki={class:"w-1/3 space-y-1"},zi={class:"text-base f-1 font-pf"},Ji={class:"text-4xl font-bold",style:{color:"#ee0002"}},Oi={class:"text-base"},Vi={class:"text-base f-2 font-pf"},$i={class:"px-5 py-10 pt-6 m2"},Qi=ee(()=>e("p",{class:"text-lg text-white"},"在本次對戰中，被6次搶購，累計漲價 21%",-1)),Zi={key:0,style:{background:"#3b3b3b",width:"1px"},class:"h-1/2"},Yi={key:1,style:{background:"#3b3b3b",width:"1px"},class:"h-1/2"},qi={class:"relative"},Xi={class:"absolute bottom-0 w-full text-center f-1 font-pf"},el=ee(()=>e("p",{style:{background:"#3b3b3b",height:"1px"},class:"w-20"},null,-1)),tl={class:"flex items-center justify-between flex-grow h-10 px-5 text-white font-pf",style:{background:"#000000",border:"1px solid #3a3a3a"}},sl={class:"w-1/3"},al={class:"w-1/3 text-center"},il={class:"w-1/3 text-right"},ll=oe({__name:"History",setup(b){const a=Ge(),{t:n}=We(),r=[{t1:"+0.122 ETH",t2:"+4%",t3:"3.157 ETH",t4:"sean.eth",t5:"當前購得該NFT",t6:"16:37:58"},{t1:"+0.117 ETH",t2:"+4%",t3:"3.035 ETH",t4:"0x9d…3hg55",t5:"若勝出淨賺 0.122 ETH",t6:"16:37:58"},{t1:"+0.112 ETH",t2:"+4%",t3:"2.918 ETH",t4:"0x48…120F5",t5:"若勝出淨賺 0.117 ETH",t6:"09-01 16:37:58"},{t1:"+0.108 ETH",t2:"+4%",t3:"2.806 ETH",t4:"bryan.eth",t5:"若勝出淨賺 0.117 ETH",t6:"09-01 16:30:58"},{t1:"+0.122 ETH",t2:"+4%",t3:"3.157 ETH",t4:"sean.eth",t5:"當前購得該NFT",t6:"16:37:58"},{t1:"起售價",t2:"+4%",t3:"3.157 ETH",t4:"sean.eth",t5:"當前購得該NFT",t6:"16:37:58"}],h=function(u){var i;return n(`views.flashSale.${((i=a.query)==null?void 0:i.type)=="team"?"saleTeamFight":"saleFight"}.${u}`)};return(u,i)=>(l(),c("div",wi,[e("section",yi,[e("div",Ai,[e("div",ki,[I(t(ae),{width:80,height:80,src:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png",class:"flex-shrink-0 mr-5"}),Ti]),Ii,e("div",Bi,[Ni,I(t(ae),{width:80,height:80,src:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png",class:"flex-shrink-0 ml-5"})])])]),e("section",Pi,[e("p",Si,s(h("t1"))+" mfer#0981 ",1),e("div",Ci,[I(t(ae),{width:140,height:140,src:"http://test.burnyou.yingguopi.com:3000/collection/image/0x53F433a6ca4940d9437AD08E3e394733920ECbb9/3",class:"flex-shrink-0"}),e("div",Ei,[e("div",Fi,[e("p",Hi,s(h("t2")),1),e("p",Di,[B(" ≥18.03 "),e("span",Mi,s(t(p)),1)]),e("p",Li,s(h("3")),1)]),e("div",Ri,[e("p",Ui,s(h("t4")),1),e("p",Gi,[B(" +0.131 "),e("span",Wi,s(t(p)),1)]),e("p",ji,s(h("t5")),1)]),e("div",Ki,[e("p",zi,s(h("t6")),1),e("p",Ji,[B(" -0.127 "),e("span",Oi,s(t(p)),1)]),e("p",Vi,s(h("t7")),1)])])])]),e("section",$i,[Qi,(l(),c(se,null,le(r,(f,y)=>e("div",{class:"flex items-center h-20 text-sm",key:y},[e("div",{class:U(`${y==0?"font-primary text-lg":"text-white"} w-40 pr-3 text-right`)},s(f.t1),3),e("div",{class:U(`h-full flex flex-col justify-${y==0?"end":y==r.length-1?"start":""}`)},[y!=0?(l(),c("p",Zi)):C("",!0),y!=r.length-1?(l(),c("p",Yi)):C("",!0)],2),e("div",qi,[e("div",Xi,s(f.t2),1),el]),e("div",{class:U(`w-40 h-10 ${y==0?"font-primary":"text-white "} flex justify-center items-center`),style:pt(`border: 1px solid ${y==0?"#BBF74C":"#3a3a3a"}`)},s(f.t3),7),e("div",tl,[e("p",sl,s(f.t4),1),e("p",al,s(f.t5),1),e("p",il,s(f.t6),1)])])),64))])]))}});const ol=ce(ll,[["__scopeId","data-v-f559d5c0"]]),cl={class:"flashSale"},nl=oe({__name:"index",setup(b){return(a,n)=>(l(),c("div",cl,[a.$route.name=="Sale"?(l(),De(gi,{key:0})):(l(),De(ol,{key:1}))]))}});const Pl=ce(nl,[["__scopeId","data-v-ff7d41a1"]]);export{Pl as default};
